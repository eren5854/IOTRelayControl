<!-- <img src="assets/bacground-img.png" alt=""> -->
<div style="margin-left: 12rem;" class="container">
    <aside id="aside" #sideMenu>
        <div class="top">
            <div class="logo">
                <img src="/assets/Eren-Logo.jpg" alt="">
                <h2>Smart<span class="danger">-</span>Home</h2>
            </div>
            <div class="close" id="close-btn">
                <span (click)="toggleSideBar()" class="material-symbols-sharp">close</span>
            </div>
        </div>
        <div class="sidebar">
            <a routerLink="/" >
                <span class="material-symbols-sharp">grid_view</span>
                <h3>Dashboard</h3>
            </a>
            <a href="" >
                <span class="material-symbols-sharp">person_outline</span>
                <h3>Customers</h3>
            </a>
            <a href="">
                <span class="material-symbols-sharp">receipt_long</span>
                <h3>Orders</h3>
            </a>
            <a href="">
                <span class="material-symbols-sharp">insights</span>
                <h3>Analytics</h3>
            </a>
            <a href="">
                <span class="material-symbols-sharp">mail_outline</span>
                <h3>Messages</h3>
                <span class="message-count">26</span>
            </a>
            <a href="">
                <span class="material-symbols-sharp">inventory</span>
                <h3>Products</h3>
            </a>
            <!-- <a href="">
                <span class="material-symbols-sharp">report_gmailerrorred</span>
                <h3>Reports</h3>
            </a> -->
            <a routerLink="/user-settings" >
                <span class="material-symbols-sharp">settings</span>
                <h3>Settings</h3>
            </a>
            <a href="">
                <span class="material-symbols-sharp">add</span>
                <h3>Add Product</h3>
            </a>
            <a href="/">
                <span  class="material-symbols-sharp">logout</span>
                <h3>Log Out</h3>
            </a>
        </div>
    </aside>
    
    <main>
        
<h1>Dashboard</h1>

<div class="date">
    <input type="date" [value]="currentDate">
</div>

<div style=" width: 100%; margin: 1rem auto; display: flex;">
    <button style="margin-right: 1rem;" class="btn btn-success" (click)="inputVisible()">Add</button>
    <input *ngIf="isInputVisible" [(ngModel)]="sensorName" class="form-control" type="text" style="width: 200px;" (keydown.enter)="createSensor()">
</div>

<div class="insights">
    @for (sensor of sensors; track sensor) {
        <div class="sales">
            <span class="material-symbols-outlined">lightbulb</span>
            <span (click)="deleteSensorById(sensor.id)" style="margin-left: 0.5rem; background: red;" class="material-symbols-outlined">remove</span>
            <div class="middle">
                <div class="left">
                    <h1 *ngIf="!sensor.isEditing" (dblclick)="editSensor(sensor)">{{sensor.name}}</h1>
                    <input focus class="form-control" *ngIf="sensor.isEditing" [value]="sensor.name" (blur)="saveSensor(sensor, $event)" (keydown.enter)="saveSensor(sensor, $event)">
                    <button class="btn btn-danger" style="margin-top: 0.3rem;" *ngIf="sensor.isEditing" (click)="cancelUpdate(sensor)">X</button>
                </div>
                <div class="progress">
                    <span (click)="updateSensor(sensor)" class="material-symbols-outlined" style="width: 100%; height: 100%; font-size: 80px; text-align: center; background: var(--color-danger);" [ngClass]="sensor.data === 0 ? 'background-danger' : 'background-success'">
                        power_settings_new
                    </span>
                </div>
            </div>
        </div>
    }
    
</div>
    </main>

   
    <div class="right">
        <div class="top">
            <button id="menu-btn">
                <span (click)="toggleSideBar()" class="material-symbols-sharp">menu</span>
            </button>
            <div class="theme-toggler" (click)="toggleTheme()">
                <span class="material-symbols-sharp" [class.active]="!isDarkTheme">light_mode</span>
                <span class="material-symbols-sharp" [class.active]="isDarkTheme">dark_mode</span>
              </div>
            <div class="profile">
                <div class="info">
                    <h4 style="font-size: 14px;">Merhaba, <b>İhsan Eren Delibaş</b></h4>
                    <b>eren&#64;gmail.com</b>
                    <h3 >Admin </h3>
                </div>
                <div class="profile-photo">
                    <img src="https://localhost:7177/ProfilePictures/" alt="">
                </div>
            </div>
        </div>
    </div>
</div>